<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Brainstorming Tool</title>
    

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
      var ideas = {
        'surrender is a book': [
          'Is surrender for reading like a book?',
          'Does surrender entertain like a book does?',
          'Does surrender give or transfer knowledge like a book does?',
          'Is surrender used for accounting like a book?',
          'Does surrender tell a story like a book does?',
          'Does surrender take you on a journey like a book does?',
          'Can surrender have a satisfying ending like a book can?',
          'Can surrender leave you wanting for more like a book can?',
          'Can surrender record history like a book can?'],
        'god is a breath': [
          'Is god necessary to keep living like a breath is?',
          'Does god get oxygen into your blood like a breath does?',
          'Can god calm you down like a breath can?',
          'Can god help you focus like a breath can?',
          'Does god warm the air like a breath does?',
          'Does god remove oxygen from the air like a breath does?',
          'Does god get rid of toxins from your lungs like a breath does?',
          'Can god communicate your emotional state like a breath can?',
          'Can god blow out a candle like a breath can?'],
        'immortality is a room': [
          'Does immortality shelter you from the elements like a room does?',
          'Can immortality be a place of your own like a room can?',
          'Is immortality for sleeping in like a room is?',
          'Is immortality for storing your possessions like a room is?',
          'Can immortality show your personality like a room can?',
          'Can immortality be used for meetings like a room can?',
          'Does immortality partition a larger space like a room does?',
          'Can immortality be a stable location like a room can?',
          ''],
        'peace is a rock': [
          'Is peace used for building a foundation like a rock is?',
          'Can peace be used for breaking things like a rock can?',
          'Can peace be used for hurting people like a rock can?',
          'Can peace be used for decorating a garden like a rock can?',
          'Can peace be used to hold things down in the wind like a rock can?',
          'Is peace used for making roads like a rock is?',
          'Can peace be used as evidence for geological formations like a rock can?',
          'Can peace be broken into smaller pieces like a rock can?',
          'Can peace be stood upon like a rock can?'
          ],
        'anger is wood': [
          'Is anger used for building cabins like wood is?',
          'Is anger used for building boats like wood is?',
          'Is anger used for building fences like wood is?',
          'Is anger used to make a fire like wood is?',
          'Can anger be used to hit people like wood can?',
          'Is anger used as structural element like wood is?',
          'Is anger a renewable resource like wood is?',
          'Is anger biodegrable like wood is?',
          ''
          ]
      }

      var index = 0;
      var count = 3;
      var mcount = 0;

      var metaphor = '${prompt-metaphor}'
      var metaphors = [
        'surrender is a book',
        // 'anger is wood',
        'immortality is a room',
        // 'peace is a rock',
        'god is a breath'
        ]

      var clickData = []

      var startTime, currTime;

      function insertMet(i) {
        $('.metaphor').empty(); $('.concrete').empty(); $('.poetic').empty();
        $('.metaphor').text(metaphors[i]);
        var words = metaphors[i].split(' ');
        $('.concrete').text(words[words.length-1]);
        $('.poetic').text(words[0]);
      }

      $(document).ready( function() {
        console.log('test1');

        insertMet(mcount);

        $('.submit').click( function() {
          var results = $('.my-textarea').val().replace(/\n/ig, '<br />');
          $('.results').append("<p>"+metaphors[mcount]).append("<p>"+results);
          $('.results').append($('#ideasclicks').attr('value')).append("<p>*");
          $('#ideasclicks').attr('value', ''); clickData = [];
          $('.my-textarea').val('');
          mcount++;
          insertMet(mcount);
          $('.idea').empty();
          index = 0;
        })

        prevTime = new Date();

        // brainstorming tool functionality
        $('.getidea').click( function() {
          currTime = new Date();
          $('.idea').empty();

          for (i=0; i<count; i++) {
            if (index > ideas[metaphors[mcount]].length - 1) { index = 0; }
            $('.idea').append('<p>' + ideas[metaphors[mcount]][index])
            index++;
          }

          var data = {
            'currTime': currTime, 
            'sinceLastClick': currTime - prevTime,
            'ideasRetrieved': $('.idea').text()
          }
          clickData.push(data);
          $('#ideasclicks').attr('value', JSON.stringify(clickData));
          prevTime = currTime;

        });
      });
    </script>


  </head>
  <body>
    <div class="container-fluid">

      <div class="row">

        <div class="col-sm-2"></div>

        <div class="col-sm-8">

          <p>&nbsp;</p>
          <div class="panel panel-primary">  
            <div class="panel-heading"><strong>Writing Instructions</strong></p></div>
            <div class="panel-body">
              <p>Write a <u>four line poem</u> on the theme of <strong><span class='metaphor'></span></strong>. Your poem should show how the metaphor works or could be interpreted. A metaphor applies one or more features of one concept to another. In this case, you should apply some feature of <strong><span class='concrete'></span></strong> to <strong><span class='poetic'></span></strong>.</p>

              <p>We are looking for poems that are both meaningful, in that they convey a specific message, and poetic, in that the sound, shape, and imagery of the poem contribute to the expression of the message. Examples of poetic style include alliteration; strict, slant, and internal rhyme; length of the lines; and strong imagery.</p>

              <p>If you are not sure how the two words in the metaphor relate, you can get ideas using 'Get Ideas' below. Each time you click 'Get Ideas', you will get a new set of ideas.</p>

              <p>Make sure your poem contains the <u>metaphor</u>. For example, for <strong>love is a storm</strong> you might apply the transitory nature of storms to love. One line of the poem might be: </p>
              
              <p><em>
                Love comes on suddenly but does not last
              </em></p>

              <p class="text-center">*</p>

              <div class="row">
                <div class="col-sm-2">
                  <p class="getidea"><u><mark>Get Ideas</mark></u></p>
                </div>
                <div class="col-sm-10 idea">
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-8">
              <p>
                Write your four line poem below on <strong><span class='metaphor'></span></strong>.<br />
                It should show the ways in which <strong><span class='poetic'></span></strong> is like <strong><span class='concrete'></span></strong>.
              </p>
              <textarea class="my-textarea form-control" rows="10" name="poem"></textarea>
              <input type="hidden" name="ideasclicks" value="{}" id="ideasclicks">
              <p>&nbsp;</p>
              <button class='btn btn-primary submit'>Submit</button>
            </div>
            <div class="col-sm-2"></div>
          </div>

          <div class="results">
          </div>

        </div>

        <div class="col-sm-2"></div>

      </div>

      
    </div>
  </body>
</html>